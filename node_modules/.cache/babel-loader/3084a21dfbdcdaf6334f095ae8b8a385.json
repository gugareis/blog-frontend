{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _slicedToArray from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';// import '../../styles/global.css'\nimport AlbumsService from'../../services/albumService';import{Link,withRouter}from\"react-router-dom\";import AlbumsTables from'./albumsTables';import{Button}from'primereact/button';import{Card}from'primereact/card';import{FileUpload}from'primereact/fileupload';import{Messages}from'primereact/messages';import{Message}from'primereact/message';export var Albums=/*#__PURE__*/function(_React$Component){_inherits(Albums,_React$Component);function Albums(){var _this;_classCallCheck(this,Albums);_this=_possibleConstructorReturn(this,_getPrototypeOf(Albums).call(this));_this.invoiceUploadHandler=function(_ref){var files=_ref.files;var _files=_slicedToArray(files,1),file=_files[0];_this.setState({file:file});// const fileReader = new FileReader();\n// fileReader.onload = (e) => {\n//     this.uploadInvoice(e.target.result);\n// };\n// fileReader.readAsDataURL(file);\n};_this.uploadInvoice=function(invoiceFile){_this.setState({file:invoiceFile});};_this.addAlbums=function(){var _this$state=_this.state,albums=_this$state.albums,link=_this$state.link,file=_this$state.file;var data=new FormData();data.append('data',file);data.append('albums',albums);data.append('link',link);_this.albumsService.save(data).then(function(data){_this.atualizaLista();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});// showMessageError(\"Erro de Login\",  erro.response.data.message)\n}});};_this.atualizaLista=function _callee(){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(_this.albumsService.getList().then(function(data){if(data.data.length>0){var albums=data.data.map(function(el){return React.createElement(AlbumsTables,{Albuns:el,ChangePage:_this.onPage});});_this.setState({albumsList:albums});_this.getAlbumsList();}else{_this.setState({albumsList:[]});}}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}}));case 2:case\"end\":return _context.stop();}}});};_this.deleteAlbum=function _callee2(id){return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(_this.albumsService.erase(id).then(function(data){_this.atualizaLista();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}}));case 2:case\"end\":return _context2.stop();}}});};_this.state={albumsList:[],file:null};_this.albumsService=new AlbumsService();_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));// this.onUpload = this.onUpload.bind(this);\nreturn _this;}_createClass(Albums,[{key:\"onClick\",value:function onClick(name,position){var state=_defineProperty({},\"\".concat(name),true);if(position){state=_objectSpread({},state,{position:position});}this.setState(state);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.albumsService.getList().then(function(data){_this2.setState({albumsList:data.data});_this2.getAlbumsList();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this2.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(React.Fragment,null,\"  \",React.createElement(Messages,{ref:function ref(el){return _this3.messages=el;}}),React.createElement(\"div\",{className:\"container\"},React.createElement(Card,{title:\"Posts\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"bs-component\"},React.createElement(\"div\",{className:\"p-col-12 p-md-4\"},React.createElement(FileUpload,{name:\"imagem\",accept:\"image/*\",customUpload:true,uploadHandler:this.invoiceUploadHandler,mode:\"basic\",auto:true,chooseLabel:\"Upload image\"}),React.createElement(\"br\",null))))))),React.createElement(Card,{title:\"Lista de Albuns\"},React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-12\"},React.createElement(\"div\",{className:\"bs-component\"},React.createElement(AlbumsTables,{Albuns:this.state,ChangePage:this.onPage}))))));}}]);return Albums;}(React.Component);export default withRouter(Albums);","map":{"version":3,"sources":["C:/Users/gugar/Documents/git/blog-frontend/src/pages/Albums/index.js"],"names":["React","AlbumsService","Link","withRouter","AlbumsTables","Button","Card","FileUpload","Messages","Message","Albums","invoiceUploadHandler","files","file","setState","uploadInvoice","invoiceFile","addAlbums","state","albums","link","data","FormData","append","albumsService","save","then","atualizaLista","catch","erro","response","console","log","messages","show","severity","summary","detail","getList","length","map","el","onPage","albumsList","getAlbumsList","deleteAlbum","id","erase","onClick","bind","name","position","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\n// import '../../styles/global.css'\r\nimport AlbumsService from '../../services/albumService'\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport AlbumsTables from './albumsTables'\r\n\r\n\r\nimport {Button} from 'primereact/button';\r\nimport {Card} from 'primereact/card';\r\nimport {FileUpload} from 'primereact/fileupload';\r\nimport {Messages} from 'primereact/messages';\r\nimport {Message} from 'primereact/message';\r\nexport class Albums extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            albumsList:[],\r\n            file:null\r\n        };\r\n        this.albumsService = new AlbumsService();\r\n        \r\n        this.onClick = this.onClick.bind(this);\r\n        // this.onUpload = this.onUpload.bind(this);\r\n    }\r\n    invoiceUploadHandler = ({files}) => {\r\n        const [file] = files;\r\n        this.setState({file:file});\r\n        // const fileReader = new FileReader();\r\n        // fileReader.onload = (e) => {\r\n        //     this.uploadInvoice(e.target.result);\r\n        // };\r\n        // fileReader.readAsDataURL(file);\r\n    };\r\n    uploadInvoice = (invoiceFile) => {\r\n        this.setState({file:invoiceFile});\r\n    };\r\n    onClick(name, position) {\r\n        let state = {\r\n            [`${name}`]: true\r\n        };\r\n\r\n        if (position) {\r\n            state = {\r\n                ...state,\r\n                position\r\n            }\r\n        }\r\n\r\n        this.setState(state);\r\n    }\r\n    addAlbums = () => {    \r\n        const { albums, link,file } = this.state;\r\n        let data = new FormData();\r\n        data.append('data', file);\r\n        data.append('albums', albums);\r\n        data.append('link', link);\r\n        this.albumsService.save(data).then(data => {\r\n            this.atualizaLista();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n                // showMessageError(\"Erro de Login\",  erro.response.data.message)\r\n            }\r\n        })\r\n        \r\n    }\r\n    atualizaLista = async () =>{\r\n        await this.albumsService.getList().then(data => {\r\n            if(data.data.length > 0){\r\n                 \r\n                let albums = data.data.map((el) => {\r\n                    return <AlbumsTables Albuns={el} ChangePage={this.onPage}></AlbumsTables>\r\n                }) \r\n                this.setState({albumsList: albums});\r\n                this.getAlbumsList();\r\n            }else{\r\n                this.setState({albumsList:[]});\r\n            }\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    componentDidMount() {\r\n        this.albumsService.getList().then(data => {\r\n            this.setState({albumsList: data.data});\r\n            this.getAlbumsList();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    \r\n    deleteAlbum = async (id) => {\r\n        await this.albumsService.erase(id).then(data => {\r\n            this.atualizaLista();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    \r\n    \r\n    render() {\r\n        return (\r\n            <>  <Messages ref={(el) => this.messages = el}></Messages>\r\n            <div  className=\"container\">\r\n                    <Card title=\"Posts\" >\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-6\">\r\n                                <div className=\"bs-component\">\r\n                                    <div className=\"p-col-12 p-md-4\">                                        \r\n                                        \r\n                                        <FileUpload name=\"imagem\"\r\n                                            accept=\"image/*\"\r\n                                            customUpload={true}\r\n                                            uploadHandler={this.invoiceUploadHandler}\r\n                                            mode=\"basic\"\r\n                                            auto={true}\r\n                                            chooseLabel=\"Upload image\"/>\r\n                                        <br></br>\r\n                                    </div>\r\n                                    \r\n                                    \r\n                                \r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </Card>\r\n                \r\n                    </div>\r\n            <Card title=\"Lista de Albuns\" >\r\n                    <br></br>\r\n                    <br></br>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-12\">\r\n                            <div className=\"bs-component\">\r\n                               <AlbumsTables  Albuns={this.state} ChangePage={this.onPage}></AlbumsTables>  \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n                \r\n           </>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(Albums);\r\n"]},"metadata":{},"sourceType":"module"}