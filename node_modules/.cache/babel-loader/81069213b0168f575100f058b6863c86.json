{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _slicedToArray from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\gugar\\\\Documents\\\\git\\\\blog-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';// import '../../styles/global.css'\nimport PostService from'../../services/postService';import commentsService from'../../services/commentsService';import{Link,withRouter}from\"react-router-dom\";import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{Card}from'primereact/card';import{Button}from'primereact/button';import{InputText}from'primereact/inputtext';import{FileUpload}from'primereact/fileupload';import{Messages}from'primereact/messages';import{Message}from'primereact/message';export var Blog=/*#__PURE__*/function(_React$Component){_inherits(Blog,_React$Component);function Blog(){var _this;_classCallCheck(this,Blog);_this=_possibleConstructorReturn(this,_getPrototypeOf(Blog).call(this));_this.invoiceUploadHandler=function(_ref){var files=_ref.files;var _files=_slicedToArray(files,1),file=_files[0];_this.setState({file:file});// const fileReader = new FileReader();\n// fileReader.onload = (e) => {\n//     this.uploadInvoice(e.target.result);\n// };\n// fileReader.readAsDataURL(file);\n};_this.uploadInvoice=function(invoiceFile){_this.setState({file:invoiceFile});};_this.addPost=function(){var _this$state=_this.state,post=_this$state.post,link=_this$state.link,file=_this$state.file;var data=new FormData();data.append('data',file);data.append('post',post);data.append('link',link);_this.postService.save(data).then(function(data){_this.atualizaLista();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});// showMessageError(\"Erro de Login\",  erro.response.data.message)\n}});};_this.atualizaLista=function(){_this.postService.getList().then(function(data){if(data.data.length>0){_this.setState({postsList:data.data});_this.getPostList();}else{_this.setState({gridList:[]});}}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}});};_this.deleteComment=function _callee(id){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(_this.commentsServices.erase(id).then(function(data){_this.atualizaLista();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}}));case 2:case\"end\":return _context.stop();}}});};_this.deletePost=function _callee2(id){return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(_this.postService.erase(id).then(function(data){_this.atualizaLista();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}}));case 2:case\"end\":return _context2.stop();}}});};_this.getPostList=function(){var result=_this.state.postsList.map(function(item,i){var list=[];var data=_this.commentsServices.getListByPostId(parseInt(item.id)).then(function(data){list=data.data;var componetsGet=list.map(function(el){if(el.userId===item.userId){return React.createElement(\"p\",null,el.comments,React.createElement(Button,{label:\"Excluir\",onClick:function onClick(){return _this.deleteComment(el.id);},icon:\"pi pi-times\",className:\"p-button-secondary\"}));}else{return React.createElement(\"p\",null,el.comments);}});_this.setState({componets:componetsGet});}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Erro ao buscar commentários'});}});return React.createElement(Card,{footer:React.createElement(\"span\",null,React.createElement(\"span\",{className:\"p-float-label\"},React.createElement(InputText,{id:\"Comment\",value:_this.state.comment,onChange:function onChange(e){return _this.setState({comment:e.target.value});}})),React.createElement(Button,{label:\"Adicionar comment\\xE1rio\",onClick:function onClick(){return _this.addComment(item.id,_this.state.comment);},icon:\"pi pi-check\",style:{marginRight:'.25em'}}),React.createElement(Button,{label:\"Excluir\",onClick:function onClick(){return _this.deletePost(item.id);},icon:\"pi pi-times\",className:\"p-button-secondary\"})),header:React.createElement(\"img\",{alt:\"Card\",src:\"data:image/jpeg;base64,\".concat(item.data)})},React.createElement(\"br\",null),React.createElement(\"h5\",null,\"Post\"),React.createElement(\"p\",null,item.post),React.createElement(\"h5\",null,\"Link\"),React.createElement(\"p\",null,item.link),React.createElement(\"h5\",null,\"Coment\\xE1rios\"),_this.state.componets);});_this.setState({gridList:result});};_this.addComment=function(id,comment){_this.commentsServices.save({\"postId\":id,\"comment\":comment}).then(function(data){_this.atualizaLista();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this.messages.show({severity:'error',summary:'Error Message',detail:'Erro ao buscar commentários'});}});};_this.getcommenttList=function(item){};_this.state={postsList:[],commentsList:[],post:\"\",link:\"\",commentTupla:[],gridList:null,file:null};_this.postService=new PostService();_this.commentsServices=new commentsService();_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));// this.onUpload = this.onUpload.bind(this);\nreturn _this;}_createClass(Blog,[{key:\"onClick\",value:function onClick(name,position){var state=_defineProperty({},\"\".concat(name),true);if(position){state=_objectSpread({},state,{position:position});}this.setState(state);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.postService.getList().then(function(data){_this2.setState({postsList:data.data});_this2.getPostList();}).catch(function(erro){if(erro!=null&&erro.response!=null&&erro.response.data!=null){console.log(erro.response);_this2.messages.show({severity:'error',summary:'Error Message',detail:'Validation failed'});}});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(React.Fragment,null,\"  \",React.createElement(Messages,{ref:function ref(el){return _this3.messages=el;}}),React.createElement(\"div\",{className:\"container\"},React.createElement(Card,{title:\"Posts\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"div\",{className:\"bs-component\"},React.createElement(\"div\",{className:\"p-col-12 p-md-4\"},React.createElement(\"label\",{htmlFor:\"inputPost\"},\"Post \"),React.createElement(\"span\",{className:\"p-float-label\"},React.createElement(InputText,{id:\"post\",value:this.state.post,onChange:function onChange(e){return _this3.setState({post:e.target.value});}})),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"inputPost\"},\"Link \"),React.createElement(\"span\",{className:\"p-float-label\"},React.createElement(InputText,{id:\"link\",value:this.state.link,onChange:function onChange(e){return _this3.setState({link:e.target.value});}})),React.createElement(\"br\",null),React.createElement(FileUpload,{name:\"imagem\",accept:\"image/*\",customUpload:true,uploadHandler:this.invoiceUploadHandler,mode:\"basic\",auto:true,chooseLabel:\"Upload image\"}),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"p-col-12 p-md-4\"},React.createElement(Button,{onClick:this.addPost,label:\"Adicionar post\",icon:\"pi pi-plus\",iconPos:\"right\"}))))))),this.state.gridList));}}]);return Blog;}(React.Component);export default withRouter(Blog);","map":{"version":3,"sources":["C:/Users/gugar/Documents/git/blog-frontend/src/pages/Post/index.js"],"names":["React","PostService","commentsService","Link","withRouter","DataTable","Column","Card","Button","InputText","FileUpload","Messages","Message","Blog","invoiceUploadHandler","files","file","setState","uploadInvoice","invoiceFile","addPost","state","post","link","data","FormData","append","postService","save","then","atualizaLista","catch","erro","response","console","log","messages","show","severity","summary","detail","getList","length","postsList","getPostList","gridList","deleteComment","id","commentsServices","erase","deletePost","result","map","item","i","list","getListByPostId","parseInt","componetsGet","el","userId","comments","componets","comment","e","target","value","addComment","marginRight","getcommenttList","commentsList","commentTupla","onClick","bind","name","position","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\n// import '../../styles/global.css'\r\nimport PostService from '../../services/postService'\r\nimport commentsService from '../../services/commentsService'\r\nimport { Link, withRouter } from \"react-router-dom\";\r\n\r\n\r\nimport {DataTable} from 'primereact/datatable';\r\nimport {Column} from 'primereact/column';\r\nimport {Card} from 'primereact/card';\r\nimport {Button} from 'primereact/button';\r\nimport {InputText} from 'primereact/inputtext';\r\nimport {FileUpload} from 'primereact/fileupload';\r\nimport {Messages} from 'primereact/messages';\r\nimport {Message} from 'primereact/message';\r\nexport class Blog extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            postsList:[],\r\n            commentsList:[],\r\n            post:\"\",\r\n            link:\"\",\r\n            commentTupla:[],\r\n            gridList:null,\r\n            file:null\r\n        };\r\n        this.postService = new PostService();\r\n        this.commentsServices = new commentsService();\r\n        \r\n        this.onClick = this.onClick.bind(this);\r\n        // this.onUpload = this.onUpload.bind(this);\r\n    }\r\n    invoiceUploadHandler = ({files}) => {\r\n        const [file] = files;\r\n        this.setState({file:file});\r\n        // const fileReader = new FileReader();\r\n        // fileReader.onload = (e) => {\r\n        //     this.uploadInvoice(e.target.result);\r\n        // };\r\n        // fileReader.readAsDataURL(file);\r\n    };\r\n    uploadInvoice = (invoiceFile) => {\r\n        \r\n    \r\n        this.setState({file:invoiceFile});\r\n    };\r\n    onClick(name, position) {\r\n        let state = {\r\n            [`${name}`]: true\r\n        };\r\n\r\n        if (position) {\r\n            state = {\r\n                ...state,\r\n                position\r\n            }\r\n        }\r\n\r\n        this.setState(state);\r\n    }\r\n    addPost = () => {    \r\n        const { post, link,file } = this.state;\r\n        let data = new FormData();\r\n        data.append('data', file);\r\n        data.append('post', post);\r\n        data.append('link', link);\r\n        this.postService.save(data).then(data => {\r\n            this.atualizaLista();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n                // showMessageError(\"Erro de Login\",  erro.response.data.message)\r\n            }\r\n        })\r\n    }\r\n    atualizaLista = () =>{\r\n        this.postService.getList().then(data => {\r\n            if(data.data.length > 0){\r\n                this.setState({postsList: data.data});\r\n                this.getPostList();\r\n            }else{\r\n                this.setState({gridList:[]});\r\n            }\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    componentDidMount() {\r\n        this.postService.getList().then(data => {\r\n            this.setState({postsList: data.data});\r\n            this.getPostList();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    deleteComment = async (id) => {\r\n        await this.commentsServices.erase(id).then(data => {\r\n            this.atualizaLista();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    \r\n    deletePost = async (id) => {\r\n        await this.postService.erase(id).then(data => {\r\n            this.atualizaLista();\r\n        }).catch(erro => {\r\n            if(erro != null && erro.response != null && erro.response.data != null){\r\n                console.log(erro.response)\r\n                this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Validation failed' });\r\n            }\r\n        })\r\n    }\r\n    getPostList =  () => {\r\n        const result = this.state.postsList.map((item, i) => {\r\n            let list = [];\r\n            \r\n            const data =  this.commentsServices.getListByPostId(parseInt(item.id)).then(data => {\r\n               list = data.data;\r\n               let componetsGet = list.map((el) => {\r\n                if(el.userId === item.userId){\r\n                    return <p>{el.comments}\r\n                            <Button label=\"Excluir\" onClick={() => this.deleteComment(el.id)} icon=\"pi pi-times\" className=\"p-button-secondary\"/>\r\n                        </p>\r\n                }else{\r\n                    return <p>{el.comments}</p>\r\n                }\r\n              }); \r\n              this.setState({componets:componetsGet});\r\n           }).catch(erro => {\r\n               if(erro != null && erro.response != null && erro.response.data != null){\r\n                   console.log(erro.response)\r\n                   this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Erro ao buscar commentários' });\r\n               }\r\n           })\r\n           \r\n           return (<Card footer={<span>   \r\n                       <span className=\"p-float-label\">\r\n                           <InputText id=\"Comment\" value={this.state.comment} onChange={(e) => this.setState({comment: e.target.value})} />\r\n                       </span>\r\n                       <Button label=\"Adicionar commentário\" onClick={() => this.addComment(item.id,this.state.comment)} icon=\"pi pi-check\" style={{marginRight: '.25em'}}/>\r\n                       <Button label=\"Excluir\" onClick={() => this.deletePost(item.id)} icon=\"pi pi-times\" className=\"p-button-secondary\"/>\r\n                   </span>} header={<img alt=\"Card\" src={`data:image/jpeg;base64,${item.data}`}/>}>\r\n                   \r\n                   <br></br>\r\n                   <h5>Post</h5>\r\n                   <p>\r\n                       {item.post}\r\n                   </p>\r\n                   <h5>Link</h5>\r\n                   <p>\r\n                       {item.link}\r\n                   </p>\r\n                   <h5>Comentários</h5>\r\n                       {this.state.componets}\r\n               </Card>);\r\n        \r\n        });\r\n        this.setState({gridList:result});\r\n    }\r\n    addComment = (id,comment) =>{\r\n        this.commentsServices.save({\"postId\":id,\"comment\":comment}).then(data => {\r\n            this.atualizaLista();\r\n        }).catch(erro => {\r\n               if(erro != null && erro.response != null && erro.response.data != null){\r\n                   console.log(erro.response)\r\n                   this.messages.show({ severity: 'error', summary: 'Error Message', detail: 'Erro ao buscar commentários' });\r\n               }\r\n           })\r\n    }\r\n    getcommenttList =  (item) => {\r\n        \r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <>  <Messages ref={(el) => this.messages = el}></Messages>\r\n                <div  className=\"container\">\r\n                    <Card title=\"Posts\" >\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-6\">\r\n                                <div className=\"bs-component\">\r\n                                    <div className=\"p-col-12 p-md-4\">\r\n                                        \r\n                                        <label htmlFor=\"inputPost\">Post </label>\r\n                                        <span className=\"p-float-label\">\r\n                                            <InputText id=\"post\" value={this.state.post} onChange={(e) => this.setState({post: e.target.value})} />\r\n                                        </span>\r\n                                        <br></br>\r\n                                        <label htmlFor=\"inputPost\">Link </label>\r\n                                        <span className=\"p-float-label\">\r\n                                            <InputText id=\"link\" value={this.state.link} onChange={(e) => this.setState({link: e.target.value})} />\r\n                                        </span>\r\n                                        <br></br>\r\n                                        <FileUpload name=\"imagem\"\r\n                                            accept=\"image/*\"\r\n                                            customUpload={true}\r\n                                            uploadHandler={this.invoiceUploadHandler}\r\n                                            mode=\"basic\"\r\n                                            auto={true}\r\n                                            chooseLabel=\"Upload image\"/>\r\n                                        <br></br>\r\n                                        <div className=\"p-col-12 p-md-4\">\r\n                                            \r\n                                            <Button  onClick={this.addPost} label='Adicionar post' icon=\"pi pi-plus\" iconPos=\"right\"></Button>\r\n                                        </div>\r\n                                    </div>\r\n                                    \r\n                                    \r\n                                \r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </Card>\r\n                    {this.state.gridList}\r\n                \r\n                </div>\r\n           </>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(Blog);\r\n"]},"metadata":{},"sourceType":"module"}